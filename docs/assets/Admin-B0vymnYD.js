var Ce=e=>{throw TypeError(e)};var ue=(e,t,s)=>t.has(e)||Ce("Cannot "+s);var r=(e,t,s)=>(ue(e,t,"read from private field"),s?s.call(e):t.get(e)),j=(e,t,s)=>t.has(e)?Ce("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,s),p=(e,t,s,n)=>(ue(e,t,"write to private field"),n?n.call(e,s):t.set(e,s),s),w=(e,t,s)=>(ue(e,t,"access private method"),s);import{t as Ye,v as Pe,w as T,x as ge,y as oe,z as $e,A as pe,B as De,C as Je,E as Ke,F as Ge,G as ke,H as qe,r as P,I as Ze,c as ae,j as a,i as et,s as tt,k as st,l as he,J as Fe}from"./index-DoFdhZpa.js";import{s as at,n as Te,u as Oe,L as nt,I as rt,M as it}from"./input-BPAnCasq.js";import{B as re}from"./button-DFmR9Ort.js";import{C as H,b as Y,c as $,d as J,a as K}from"./card-CYs0_dRs.js";import{S as Ee}from"./star-CXYnVmNu.js";var C,h,te,N,W,V,E,F,se,X,q,A,L,I,B,f,ee,xe,ye,ve,be,we,je,Me,Be,Xe,ot=(Xe=class extends Ye{constructor(t,s){super();j(this,f);j(this,C);j(this,h);j(this,te);j(this,N);j(this,W);j(this,V);j(this,E);j(this,F);j(this,se);j(this,X);j(this,q);j(this,A);j(this,L);j(this,I);j(this,B,new Set);this.options=s,p(this,C,t),p(this,F,null),p(this,E,Pe()),this.options.experimental_prefetchInRender||r(this,E).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(s)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(r(this,h).addObserver(this),Ie(r(this,h),this.options)?w(this,f,ee).call(this):this.updateResult(),w(this,f,be).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Re(r(this,h),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Re(r(this,h),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,w(this,f,we).call(this),w(this,f,je).call(this),r(this,h).removeObserver(this)}setOptions(t,s){const n=this.options,i=r(this,h);if(this.options=r(this,C).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof T(this.options.enabled,r(this,h))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");w(this,f,Me).call(this),r(this,h).setOptions(this.options),n._defaulted&&!ge(this.options,n)&&r(this,C).getQueryCache().notify({type:"observerOptionsUpdated",query:r(this,h),observer:this});const c=this.hasListeners();c&&We(r(this,h),i,this.options,n)&&w(this,f,ee).call(this),this.updateResult(s),c&&(r(this,h)!==i||T(this.options.enabled,r(this,h))!==T(n.enabled,r(this,h))||oe(this.options.staleTime,r(this,h))!==oe(n.staleTime,r(this,h)))&&w(this,f,xe).call(this);const o=w(this,f,ye).call(this);c&&(r(this,h)!==i||T(this.options.enabled,r(this,h))!==T(n.enabled,r(this,h))||o!==r(this,I))&&w(this,f,ve).call(this,o)}getOptimisticResult(t){const s=r(this,C).getQueryCache().build(r(this,C),t),n=this.createResult(s,t);return ct(this,n)&&(p(this,N,n),p(this,V,this.options),p(this,W,r(this,h).state)),n}getCurrentResult(){return r(this,N)}trackResult(t,s){const n={};return Object.keys(t).forEach(i=>{Object.defineProperty(n,i,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(i),s==null||s(i),t[i])})}),n}trackProp(t){r(this,B).add(t)}getCurrentQuery(){return r(this,h)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const s=r(this,C).defaultQueryOptions(t),n=r(this,C).getQueryCache().build(r(this,C),s);return n.fetch().then(()=>this.createResult(n,s))}fetch(t){return w(this,f,ee).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),r(this,N)))}createResult(t,s){var Se;const n=r(this,h),i=this.options,c=r(this,N),o=r(this,W),l=r(this,V),m=t!==n?t.state:r(this,te),{state:v}=t;let u={...v},x=!1,y;if(s._optimisticResults){const R=this.hasListeners(),_=!R&&Ie(t,s),U=R&&We(t,n,s,i);(_||U)&&(u={...u,...Ge(v.data,t.options)}),s._optimisticResults==="isRestoring"&&(u.fetchStatus="idle")}let{error:b,errorUpdatedAt:S,status:D}=u;if(s.select&&u.data!==void 0)if(c&&u.data===(o==null?void 0:o.data)&&s.select===r(this,se))y=r(this,X);else try{p(this,se,s.select),y=s.select(u.data),y=ke(c==null?void 0:c.data,y,s),p(this,X,y),p(this,F,null)}catch(R){p(this,F,R)}else y=u.data;if(s.placeholderData!==void 0&&y===void 0&&D==="pending"){let R;if(c!=null&&c.isPlaceholderData&&s.placeholderData===(l==null?void 0:l.placeholderData))R=c.data;else if(R=typeof s.placeholderData=="function"?s.placeholderData((Se=r(this,q))==null?void 0:Se.state.data,r(this,q)):s.placeholderData,s.select&&R!==void 0)try{R=s.select(R),p(this,F,null)}catch(_){p(this,F,_)}R!==void 0&&(D="success",y=ke(c==null?void 0:c.data,R,s),x=!0)}r(this,F)&&(b=r(this,F),y=r(this,X),S=Date.now(),D="error");const Q=u.fetchStatus==="fetching",O=D==="pending",z=D==="error",d=O&&Q,ce=y!==void 0,k={status:D,fetchStatus:u.fetchStatus,isPending:O,isSuccess:D==="success",isError:z,isInitialLoading:d,isLoading:d,data:y,dataUpdatedAt:u.dataUpdatedAt,error:b,errorUpdatedAt:S,failureCount:u.fetchFailureCount,failureReason:u.fetchFailureReason,errorUpdateCount:u.errorUpdateCount,isFetched:u.dataUpdateCount>0||u.errorUpdateCount>0,isFetchedAfterMount:u.dataUpdateCount>m.dataUpdateCount||u.errorUpdateCount>m.errorUpdateCount,isFetching:Q,isRefetching:Q&&!O,isLoadingError:z&&!ce,isPaused:u.fetchStatus==="paused",isPlaceholderData:x,isRefetchError:z&&ce,isStale:Ne(t,s),refetch:this.refetch,promise:r(this,E)};if(this.options.experimental_prefetchInRender){const R=ne=>{k.status==="error"?ne.reject(k.error):k.data!==void 0&&ne.resolve(k.data)},_=()=>{const ne=p(this,E,k.promise=Pe());R(ne)},U=r(this,E);switch(U.status){case"pending":t.queryHash===n.queryHash&&R(U);break;case"fulfilled":(k.status==="error"||k.data!==U.value)&&_();break;case"rejected":(k.status!=="error"||k.error!==U.reason)&&_();break}}return k}updateResult(t){const s=r(this,N),n=this.createResult(r(this,h),this.options);if(p(this,W,r(this,h).state),p(this,V,this.options),r(this,W).data!==void 0&&p(this,q,r(this,h)),ge(n,s))return;p(this,N,n);const i={},c=()=>{if(!s)return!0;const{notifyOnChangeProps:o}=this.options,l=typeof o=="function"?o():o;if(l==="all"||!l&&!r(this,B).size)return!0;const g=new Set(l??r(this,B));return this.options.throwOnError&&g.add("error"),Object.keys(r(this,N)).some(m=>{const v=m;return r(this,N)[v]!==s[v]&&g.has(v)})};(t==null?void 0:t.listeners)!==!1&&c()&&(i.listeners=!0),w(this,f,Be).call(this,{...i,...t})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&w(this,f,be).call(this)}},C=new WeakMap,h=new WeakMap,te=new WeakMap,N=new WeakMap,W=new WeakMap,V=new WeakMap,E=new WeakMap,F=new WeakMap,se=new WeakMap,X=new WeakMap,q=new WeakMap,A=new WeakMap,L=new WeakMap,I=new WeakMap,B=new WeakMap,f=new WeakSet,ee=function(t){w(this,f,Me).call(this);let s=r(this,h).fetch(this.options,t);return t!=null&&t.throwOnError||(s=s.catch($e)),s},xe=function(){w(this,f,we).call(this);const t=oe(this.options.staleTime,r(this,h));if(pe||r(this,N).isStale||!De(t))return;const n=Je(r(this,N).dataUpdatedAt,t)+1;p(this,A,setTimeout(()=>{r(this,N).isStale||this.updateResult()},n))},ye=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(r(this,h)):this.options.refetchInterval)??!1},ve=function(t){w(this,f,je).call(this),p(this,I,t),!(pe||T(this.options.enabled,r(this,h))===!1||!De(r(this,I))||r(this,I)===0)&&p(this,L,setInterval(()=>{(this.options.refetchIntervalInBackground||Ke.isFocused())&&w(this,f,ee).call(this)},r(this,I)))},be=function(){w(this,f,xe).call(this),w(this,f,ve).call(this,w(this,f,ye).call(this))},we=function(){r(this,A)&&(clearTimeout(r(this,A)),p(this,A,void 0))},je=function(){r(this,L)&&(clearInterval(r(this,L)),p(this,L,void 0))},Me=function(){const t=r(this,C).getQueryCache().build(r(this,C),this.options);if(t===r(this,h))return;const s=r(this,h);p(this,h,t),p(this,te,t.state),this.hasListeners()&&(s==null||s.removeObserver(this),t.addObserver(this))},Be=function(t){qe.batch(()=>{t.listeners&&this.listeners.forEach(s=>{s(r(this,N))}),r(this,C).getQueryCache().notify({query:r(this,h),type:"observerResultsUpdated"})})},Xe);function dt(e,t){return T(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function Ie(e,t){return dt(e,t)||e.state.data!==void 0&&Re(e,t,t.refetchOnMount)}function Re(e,t,s){if(T(t.enabled,e)!==!1){const n=typeof s=="function"?s(e):s;return n==="always"||n!==!1&&Ne(e,t)}return!1}function We(e,t,s,n){return(e!==t||T(n.enabled,e)===!1)&&(!s.suspense||e.state.status!=="error")&&Ne(e,s)}function Ne(e,t){return T(t.enabled,e)!==!1&&e.isStaleByTime(oe(t.staleTime,e))}function ct(e,t){return!ge(e.getCurrentResult(),t)}var He=P.createContext(!1),lt=()=>P.useContext(He);He.Provider;function ut(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var ht=P.createContext(ut()),mt=()=>P.useContext(ht),ft=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},gt=e=>{P.useEffect(()=>{e.clearReset()},[e])},pt=({result:e,errorResetBoundary:t,throwOnError:s,query:n})=>e.isError&&!t.isReset()&&!e.isFetching&&n&&at(s,[e.error,n]),xt=e=>{e.suspense&&(e.staleTime===void 0&&(e.staleTime=1e3),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3)))},yt=(e,t)=>e.isLoading&&e.isFetching&&!t,vt=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,Ae=(e,t,s)=>t.fetchOptimistic(e).catch(()=>{s.clearReset()});function bt(e,t,s){var v,u,x,y,b;const n=Ze(),i=lt(),c=mt(),o=n.defaultQueryOptions(e);(u=(v=n.getDefaultOptions().queries)==null?void 0:v._experimental_beforeQuery)==null||u.call(v,o),o._optimisticResults=i?"isRestoring":"optimistic",xt(o),ft(o,c),gt(c);const l=!n.getQueryCache().get(o.queryHash),[g]=P.useState(()=>new t(n,o)),m=g.getOptimisticResult(o);if(P.useSyncExternalStore(P.useCallback(S=>{const D=i?Te:g.subscribe(qe.batchCalls(S));return g.updateResult(),D},[g,i]),()=>g.getCurrentResult(),()=>g.getCurrentResult()),P.useEffect(()=>{g.setOptions(o,{listeners:!1})},[o,g]),vt(o,m))throw Ae(o,g,c);if(pt({result:m,errorResetBoundary:c,throwOnError:o.throwOnError,query:n.getQueryCache().get(o.queryHash)}))throw m.error;if((y=(x=n.getDefaultOptions().queries)==null?void 0:x._experimental_afterQuery)==null||y.call(x,o,m),o.experimental_prefetchInRender&&!pe&&yt(m,i)){const S=l?Ae(o,g,c):(b=n.getQueryCache().get(o.queryHash))==null?void 0:b.promise;S==null||S.catch(Te).finally(()=>{g.updateResult()})}return o.notifyOnChangeProps?m:g.trackResult(m)}function Le(e,t){return bt(e,ot)}/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qe=ae("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wt=ae("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jt=ae("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mt=ae("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=ae("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),Rt=tt("whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 hover-elevate ",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow-xs",secondary:"border-transparent bg-secondary text-secondary-foreground",destructive:"border-transparent bg-destructive text-destructive-foreground shadow-xs",outline:" border [border-color:var(--badge-outline)] shadow-xs"}},defaultVariants:{variant:"default"}});function _e({className:e,variant:t,...s}){return a.jsx("div",{className:et(Rt({variant:t}),e),...s})}function M(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function Nt(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}const ie=43200,Ue=1440;let St={};function Ct(){return St}function Ve(e){const t=M(e),s=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return s.setUTCFullYear(t.getFullYear()),+e-+s}function de(e,t){const s=M(e),n=M(t),i=s.getTime()-n.getTime();return i<0?-1:i>0?1:i}function Pt(e){return Nt(e,Date.now())}function Dt(e,t){const s=M(e),n=M(t),i=s.getFullYear()-n.getFullYear(),c=s.getMonth()-n.getMonth();return i*12+c}function kt(e){return t=>{const n=(e?Math[e]:Math.trunc)(t);return n===0?0:n}}function Ft(e,t){return+M(e)-+M(t)}function Tt(e){const t=M(e);return t.setHours(23,59,59,999),t}function Ot(e){const t=M(e),s=t.getMonth();return t.setFullYear(t.getFullYear(),s+1,0),t.setHours(23,59,59,999),t}function Et(e){const t=M(e);return+Tt(t)==+Ot(t)}function It(e,t){const s=M(e),n=M(t),i=de(s,n),c=Math.abs(Dt(s,n));let o;if(c<1)o=0;else{s.getMonth()===1&&s.getDate()>27&&s.setDate(30),s.setMonth(s.getMonth()-i*c);let l=de(s,n)===-i;Et(M(e))&&c===1&&de(e,n)===1&&(l=!1),o=i*(c-Number(l))}return o===0?0:o}function Wt(e,t,s){const n=Ft(e,t)/1e3;return kt(s==null?void 0:s.roundingMethod)(n)}const At={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Lt=(e,t,s)=>{let n;const i=At[e];return typeof i=="string"?n=i:t===1?n=i.one:n=i.other.replace("{{count}}",t.toString()),s!=null&&s.addSuffix?s.comparison&&s.comparison>0?"in "+n:n+" ago":n};function me(e){return(t={})=>{const s=t.width?String(t.width):e.defaultWidth;return e.formats[s]||e.formats[e.defaultWidth]}}const Qt={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},zt={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},_t={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Ut={date:me({formats:Qt,defaultWidth:"full"}),time:me({formats:zt,defaultWidth:"full"}),dateTime:me({formats:_t,defaultWidth:"full"})},Vt={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Xt=(e,t,s,n)=>Vt[e];function G(e){return(t,s)=>{const n=s!=null&&s.context?String(s.context):"standalone";let i;if(n==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,l=s!=null&&s.width?String(s.width):o;i=e.formattingValues[l]||e.formattingValues[o]}else{const o=e.defaultWidth,l=s!=null&&s.width?String(s.width):e.defaultWidth;i=e.values[l]||e.values[o]}const c=e.argumentCallback?e.argumentCallback(t):t;return i[c]}}const qt={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Bt={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Ht={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Yt={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},$t={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Jt={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Kt=(e,t)=>{const s=Number(e),n=s%100;if(n>20||n<10)switch(n%10){case 1:return s+"st";case 2:return s+"nd";case 3:return s+"rd"}return s+"th"},Gt={ordinalNumber:Kt,era:G({values:qt,defaultWidth:"wide"}),quarter:G({values:Bt,defaultWidth:"wide",argumentCallback:e=>e-1}),month:G({values:Ht,defaultWidth:"wide"}),day:G({values:Yt,defaultWidth:"wide"}),dayPeriod:G({values:$t,defaultWidth:"wide",formattingValues:Jt,defaultFormattingWidth:"wide"})};function Z(e){return(t,s={})=>{const n=s.width,i=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],c=t.match(i);if(!c)return null;const o=c[0],l=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],g=Array.isArray(l)?es(l,u=>u.test(o)):Zt(l,u=>u.test(o));let m;m=e.valueCallback?e.valueCallback(g):g,m=s.valueCallback?s.valueCallback(m):m;const v=t.slice(o.length);return{value:m,rest:v}}}function Zt(e,t){for(const s in e)if(Object.prototype.hasOwnProperty.call(e,s)&&t(e[s]))return s}function es(e,t){for(let s=0;s<e.length;s++)if(t(e[s]))return s}function ts(e){return(t,s={})=>{const n=t.match(e.matchPattern);if(!n)return null;const i=n[0],c=t.match(e.parsePattern);if(!c)return null;let o=e.valueCallback?e.valueCallback(c[0]):c[0];o=s.valueCallback?s.valueCallback(o):o;const l=t.slice(i.length);return{value:o,rest:l}}}const ss=/^(\d+)(th|st|nd|rd)?/i,as=/\d+/i,ns={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},rs={any:[/^b/i,/^(a|c)/i]},is={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},os={any:[/1/i,/2/i,/3/i,/4/i]},ds={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},cs={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},ls={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},us={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},hs={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},ms={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},fs={ordinalNumber:ts({matchPattern:ss,parsePattern:as,valueCallback:e=>parseInt(e,10)}),era:Z({matchPatterns:ns,defaultMatchWidth:"wide",parsePatterns:rs,defaultParseWidth:"any"}),quarter:Z({matchPatterns:is,defaultMatchWidth:"wide",parsePatterns:os,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Z({matchPatterns:ds,defaultMatchWidth:"wide",parsePatterns:cs,defaultParseWidth:"any"}),day:Z({matchPatterns:ls,defaultMatchWidth:"wide",parsePatterns:us,defaultParseWidth:"any"}),dayPeriod:Z({matchPatterns:hs,defaultMatchWidth:"any",parsePatterns:ms,defaultParseWidth:"any"})},gs={code:"en-US",formatDistance:Lt,formatLong:Ut,formatRelative:Xt,localize:Gt,match:fs,options:{weekStartsOn:0,firstWeekContainsDate:1}};function ps(e,t,s){const n=Ct(),i=(s==null?void 0:s.locale)??n.locale??gs,c=2520,o=de(e,t);if(isNaN(o))throw new RangeError("Invalid time value");const l=Object.assign({},s,{addSuffix:s==null?void 0:s.addSuffix,comparison:o});let g,m;o>0?(g=M(t),m=M(e)):(g=M(e),m=M(t));const v=Wt(m,g),u=(Ve(m)-Ve(g))/1e3,x=Math.round((v-u)/60);let y;if(x<2)return s!=null&&s.includeSeconds?v<5?i.formatDistance("lessThanXSeconds",5,l):v<10?i.formatDistance("lessThanXSeconds",10,l):v<20?i.formatDistance("lessThanXSeconds",20,l):v<40?i.formatDistance("halfAMinute",0,l):v<60?i.formatDistance("lessThanXMinutes",1,l):i.formatDistance("xMinutes",1,l):x===0?i.formatDistance("lessThanXMinutes",1,l):i.formatDistance("xMinutes",x,l);if(x<45)return i.formatDistance("xMinutes",x,l);if(x<90)return i.formatDistance("aboutXHours",1,l);if(x<Ue){const b=Math.round(x/60);return i.formatDistance("aboutXHours",b,l)}else{if(x<c)return i.formatDistance("xDays",1,l);if(x<ie){const b=Math.round(x/Ue);return i.formatDistance("xDays",b,l)}else if(x<ie*2)return y=Math.round(x/ie),i.formatDistance("aboutXMonths",y,l)}if(y=It(m,g),y<12){const b=Math.round(x/ie);return i.formatDistance("xMonths",b,l)}else{const b=y%12,S=Math.trunc(y/12);return b<3?i.formatDistance("aboutXYears",S,l):b<9?i.formatDistance("overXYears",S,l):i.formatDistance("almostXYears",S+1,l)}}function fe(e,t){return ps(e,Pt(e),t)}function Ms(){const{toast:e}=st(),[t,s]=P.useState(!1),[n,i]=P.useState(!1),[c,o]=P.useState(""),[l,g]=P.useState(""),{data:m,isLoading:v}=Le({queryKey:["/api/reviews"]}),{data:u,isLoading:x,error:y}=Le({queryKey:["/api/contacts"],queryFn:async()=>{try{return await(await he("GET","/api/contacts",void 0,{"x-admin-password":l})).json()}catch(d){throw d instanceof Error&&d.message.includes("401")&&(i(!1),sessionStorage.removeItem("adminPassword"),e({title:"Session Expired",description:"Please log in again",variant:"destructive"})),d}},enabled:n&&!!l,retry:!1});P.useEffect(()=>{const d=sessionStorage.getItem("adminPassword");d&&(g(d),i(!0))},[]);const b=Oe({mutationFn:()=>he("POST","/api/reviews/refresh",{password:l}),onSuccess:()=>{Fe.invalidateQueries({queryKey:["/api/reviews"]}),e({title:"Reviews Refreshed",description:"Successfully updated reviews from Google"}),s(!1)},onError:d=>{d.message.includes("401")?(i(!1),sessionStorage.removeItem("adminPassword"),e({title:"Session Expired",description:"Please log in again",variant:"destructive"})):e({title:"Refresh Failed",description:d.message||"Failed to refresh reviews",variant:"destructive"}),s(!1)}}),S=d=>{d.preventDefault(),c&&(g(c),i(!0),sessionStorage.setItem("adminPassword",c),o(""))},D=()=>{s(!0),b.mutate()},Q=Oe({mutationFn:d=>he("POST",`/api/contacts/${d}/mark-read`,{password:l}),onSuccess:()=>{Fe.invalidateQueries({queryKey:["/api/contacts"]}),e({title:"Marked as Read",description:"Contact message marked as read"})},onError:d=>{e({title:"Error",description:d.message||"Failed to mark as read",variant:"destructive"})}});if(!n)return a.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center px-4",children:a.jsxs(H,{className:"w-full max-w-md","data-testid":"card-admin-login",children:[a.jsxs(Y,{children:[a.jsxs($,{className:"flex items-center gap-2",children:[a.jsx(Mt,{size:24}),"Admin Login"]}),a.jsx(J,{children:"Enter the admin password to access the management panel"})]}),a.jsx(K,{children:a.jsxs("form",{onSubmit:S,className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(nt,{htmlFor:"password",children:"Admin Password"}),a.jsx(rt,{id:"password",type:"password",value:c,onChange:d=>o(d.target.value),placeholder:"Enter admin password","data-testid":"input-admin-password"})]}),a.jsx(re,{type:"submit",className:"w-full","data-testid":"button-admin-login",children:"Login"})]})})]})});const O=m==null?void 0:m.stats,z=(m==null?void 0:m.reviews)||[];return a.jsx("div",{className:"min-h-screen bg-background py-12 px-4 md:px-6 lg:px-8",children:a.jsxs("div",{className:"max-w-6xl mx-auto",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold mb-2","data-testid":"text-admin-title",children:"Admin Panel"}),a.jsx("p",{className:"text-muted-foreground","data-testid":"text-admin-description",children:"Manage reviews and contact messages"})]}),a.jsxs("div",{className:"grid gap-6 mb-8",children:[a.jsxs(H,{"data-testid":"card-stats",children:[a.jsxs(Y,{children:[a.jsxs($,{className:"flex items-center gap-2",children:[a.jsx(jt,{size:20}),"Review Statistics"]}),a.jsx(J,{children:"Current review data from Google Business Profile"})]}),a.jsx(K,{children:v?a.jsxs("div",{className:"animate-pulse space-y-4",children:[a.jsx("div",{className:"h-8 bg-muted rounded w-1/3"}),a.jsx("div",{className:"h-4 bg-muted rounded w-1/2"})]}):O?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ee,{className:"fill-primary text-primary",size:24}),a.jsx("span",{className:"text-3xl font-bold","data-testid":"text-admin-rating",children:O.overallRating.toFixed(1)})]}),a.jsxs("div",{className:"text-muted-foreground",children:[a.jsxs("p",{"data-testid":"text-admin-total-reviews",children:[O.totalReviews," total reviews"]}),a.jsxs("p",{className:"text-sm flex items-center gap-1","data-testid":"text-admin-last-updated",children:[a.jsx(Qe,{size:14}),"Updated ",fe(new Date(O.lastUpdated),{addSuffix:!0})]})]})]}),a.jsxs(re,{onClick:D,disabled:t||b.isPending,"data-testid":"button-refresh-reviews",children:[a.jsx(ze,{size:16,className:t||b.isPending?"animate-spin":""}),t||b.isPending?"Refreshing...":"Refresh Reviews Now"]})]}):a.jsxs("div",{children:[a.jsx("p",{className:"text-muted-foreground mb-4",children:"No review data available"}),a.jsxs(re,{onClick:D,disabled:t||b.isPending,"data-testid":"button-initial-fetch",children:[a.jsx(ze,{size:16,className:t||b.isPending?"animate-spin":""}),"Fetch Reviews"]})]})})]}),a.jsxs(H,{"data-testid":"card-recent-reviews",children:[a.jsxs(Y,{children:[a.jsx($,{children:"Recent Reviews"}),a.jsx(J,{children:"Latest reviews stored in the database"})]}),a.jsx(K,{children:v?a.jsx("div",{className:"space-y-4",children:[1,2,3].map(d=>a.jsxs("div",{className:"animate-pulse",children:[a.jsx("div",{className:"h-4 bg-muted rounded w-1/4 mb-2"}),a.jsx("div",{className:"h-16 bg-muted rounded"})]},d))}):z.length>0?a.jsx("div",{className:"space-y-4",children:z.map(d=>a.jsxs("div",{className:"border rounded-lg p-4","data-testid":`card-admin-review-${d.id}`,children:[a.jsxs("div",{className:"flex items-start justify-between mb-2",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium","data-testid":`text-admin-reviewer-${d.id}`,children:d.authorName}),a.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:5}).map((ce,le)=>a.jsx(Ee,{size:14,className:le<d.rating?"fill-primary text-primary":"text-muted"},le))})]}),a.jsx("p",{className:"text-sm text-muted-foreground",children:fe(new Date(d.reviewDate),{addSuffix:!0})})]}),d.reviewText&&a.jsx("p",{className:"text-sm text-muted-foreground","data-testid":`text-admin-review-text-${d.id}`,children:d.reviewText})]},d.id))}):a.jsx("p",{className:"text-muted-foreground",children:"No reviews available"})})]}),a.jsxs(H,{"data-testid":"card-schedule",children:[a.jsxs(Y,{children:[a.jsxs($,{className:"flex items-center gap-2",children:[a.jsx(Qe,{size:20}),"Update Schedule"]}),a.jsx(J,{children:"Automatic review refresh configuration"})]}),a.jsx(K,{children:a.jsxs("div",{className:"space-y-2",children:[a.jsxs("p",{className:"text-sm",children:[a.jsx("strong",{children:"Schedule:"})," Every Sunday at 2:00 AM"]}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Reviews are automatically fetched from Google Business Profile and updated weekly. You can manually refresh at any time using the button above."})]})})]}),a.jsxs(H,{"data-testid":"card-contact-messages",children:[a.jsxs(Y,{children:[a.jsxs($,{className:"flex items-center gap-2",children:[a.jsx(it,{size:20}),"Contact Messages",u&&u.unreadCount>0&&a.jsxs(_e,{variant:"destructive","data-testid":"badge-unread-count",children:[u.unreadCount," unread"]})]}),a.jsx(J,{children:"Messages submitted through the contact form"})]}),a.jsx(K,{children:x?a.jsx("div",{className:"space-y-4",children:[1,2,3].map(d=>a.jsxs("div",{className:"animate-pulse",children:[a.jsx("div",{className:"h-4 bg-muted rounded w-1/4 mb-2"}),a.jsx("div",{className:"h-20 bg-muted rounded"})]},d))}):y?a.jsxs("div",{className:"text-center py-8",children:[a.jsx("p",{className:"text-destructive mb-2",children:"Failed to load contact messages"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:y.message})]}):u&&u.contacts.length>0?a.jsx("div",{className:"space-y-4",children:u.contacts.map(d=>a.jsxs("div",{className:`border rounded-lg p-4 ${d.isRead===0?"bg-accent/10":""}`,"data-testid":`card-contact-${d.id}`,children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsxs("p",{className:"font-medium","data-testid":`text-contact-name-${d.id}`,children:[d.firstName," ",d.lastName]}),d.isRead===0&&a.jsx(_e,{variant:"secondary","data-testid":`badge-unread-${d.id}`,children:"New"})]}),a.jsx("p",{className:"text-sm text-muted-foreground","data-testid":`text-contact-email-${d.id}`,children:d.email}),d.company&&a.jsx("p",{className:"text-sm text-muted-foreground","data-testid":`text-contact-company-${d.id}`,children:d.company})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:fe(new Date(d.createdAt),{addSuffix:!0})}),d.isRead===0&&a.jsxs(re,{size:"sm",variant:"outline",onClick:()=>Q.mutate(d.id),disabled:Q.isPending,"data-testid":`button-mark-read-${d.id}`,children:[a.jsx(wt,{size:14,className:"mr-1"}),"Mark Read"]})]})]}),a.jsxs("div",{className:"border-t pt-3",children:[a.jsx("p",{className:"text-sm font-medium mb-1",children:"Message:"}),a.jsx("p",{className:"text-sm text-foreground whitespace-pre-wrap","data-testid":`text-contact-message-${d.id}`,children:d.message})]})]},d.id))}):a.jsx("p",{className:"text-muted-foreground",children:"No contact messages yet"})})]})]})]})})}export{Ms as default};
